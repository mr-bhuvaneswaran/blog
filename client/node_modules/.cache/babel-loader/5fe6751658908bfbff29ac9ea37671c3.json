{"ast":null,"code":"import _defineProperty from \"/home/bhuvanes/Desktop/Blogs/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/home/bhuvanes/Desktop/Blogs/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/bhuvanes/Desktop/Blogs/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/bhuvanes/Desktop/Blogs/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/bhuvanes/Desktop/Blogs/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/bhuvanes/Desktop/Blogs/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/home/bhuvanes/Desktop/Blogs/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/home/bhuvanes/Desktop/Blogs/client/src/components/SignIn.js\";\nimport React from 'react';\nimport FormControl from '@material-ui/core/FormControl';\nimport Input from '@material-ui/core/Input';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Button from '@material-ui/core/Button';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport { CircularProgress } from '@material-ui/core';\nimport axios from 'axios';\nimport { Redirect } from 'react-router';\nimport PropTypes from 'prop-types';\n\nvar styles = function styles(theme) {\n  return {\n    form: {\n      width: '100%',\n      marginTop: theme.spacing.unit\n    },\n    login: {\n      marginTop: theme.spacing.unit * 3\n    }\n  };\n};\n\nvar SignIn =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(SignIn, _React$Component);\n\n  function SignIn(props) {\n    var _this;\n\n    _classCallCheck(this, SignIn);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SignIn).call(this, props));\n\n    _this.handleChange = function (name) {\n      return function (event) {\n        _this.setState(_defineProperty({}, name, event.target.value.trim()));\n      };\n    };\n\n    _this.state = {\n      progress: false,\n      redirect: false,\n      email: '',\n      password: ''\n    };\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(SignIn, [{\n    key: \"handleSubmit\",\n    value: function handleSubmit(e) {\n      var _this2 = this;\n\n      e.preventDefault();\n      this.setState({\n        progress: true\n      });\n      axios.get(\"/api/user\", {\n        params: {\n          type: \"validate\",\n          email: this.state.email,\n          password: this.state.password\n        }\n      }).then(function (res) {\n        if (res.data.email === '') {\n          alert(\"Invalid credentials\");\n\n          _this2.setState({\n            progress: false\n          });\n\n          return;\n        }\n\n        sessionStorage.setItem('uid', res.data._id);\n        sessionStorage.setItem('uname', res.data.name);\n        sessionStorage.setItem('uemail', res.data.email);\n\n        _this2.setState({\n          redirect: true\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var classes = this.props.classes;\n\n      if (this.state.redirect) {\n        return React.createElement(Redirect, {\n          push: true,\n          to: \"home\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 62\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(\"form\", {\n        className: classes.form,\n        onSubmit: this.handleSubmit,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, React.createElement(FormControl, {\n        margin: \"normal\",\n        required: true,\n        fullWidth: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, React.createElement(InputLabel, {\n        htmlFor: \"email\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, \"Email Address\"), React.createElement(Input, {\n        id: \"email\",\n        value: this.state.email,\n        onChange: this.handleChange('email'),\n        name: \"email\",\n        autoComplete: \"email\",\n        autoFocus: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68\n        },\n        __self: this\n      })), React.createElement(FormControl, {\n        margin: \"normal\",\n        required: true,\n        fullWidth: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, React.createElement(InputLabel, {\n        htmlFor: \"password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, \"Password\"), React.createElement(Input, {\n        name: \"password\",\n        value: this.state.password,\n        onChange: this.handleChange('password'),\n        type: \"password\",\n        id: \"password\",\n        autoComplete: \"current-password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      })), React.createElement(Button, {\n        type: \"submit\",\n        fullWidth: true,\n        variant: \"contained\",\n        color: \"primary\",\n        className: classes.login,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, \"Sign in\"), this.state.progress && React.createElement(CircularProgress, {\n        style: {\n          marginTop: '10px',\n          marginLeft: '50%'\n        },\n        className: classes.progress,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return SignIn;\n}(React.Component);\n\n;\nSignIn.propTypes = {\n  classes: PropTypes.object.isRequired\n};\nexport default withStyles(styles)(SignIn);","map":{"version":3,"sources":["/home/bhuvanes/Desktop/Blogs/client/src/components/SignIn.js"],"names":["React","FormControl","Input","InputLabel","Button","withStyles","CircularProgress","axios","Redirect","PropTypes","styles","theme","form","width","marginTop","spacing","unit","login","SignIn","props","handleChange","name","event","setState","target","value","trim","state","progress","redirect","email","password","handleSubmit","bind","e","preventDefault","get","params","type","then","res","data","alert","sessionStorage","setItem","_id","classes","marginLeft","Component","propTypes","object","isRequired"],"mappings":"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","sourcesContent":["import React from 'react';\nimport FormControl from '@material-ui/core/FormControl';\nimport Input from '@material-ui/core/Input';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Button from '@material-ui/core/Button';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport { CircularProgress } from '@material-ui/core';\nimport axios from 'axios';\nimport { Redirect } from 'react-router';\nimport PropTypes from 'prop-types';\n\n\nconst styles = theme => ({\n  form: {\n    width: '100%',\n    marginTop: theme.spacing.unit,\n  },\n  login: {\n    marginTop: theme.spacing.unit * 3,\n  },\n});\n\nclass SignIn extends React.Component {\n  constructor(props){\n    super(props);\n    this.state = {\n      progress:false,\n      redirect:false,\n      email:'',\n      password:'',\n    }\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleSubmit(e){\n    e.preventDefault();\n    this.setState({progress:true});\n    axios.get(`/api/user`,{params:{type:\"validate\",email:this.state.email,password:this.state.password}})\n    .then((res)=>{\n      if(res.data.email === ''){\n        alert(\"Invalid credentials\");\n        this.setState({progress:false});\n        return;\n      }\n      sessionStorage.setItem('uid',res.data._id);\n      sessionStorage.setItem('uname',res.data.name);\n      sessionStorage.setItem('uemail',res.data.email);\n      this.setState({redirect:true});   \n    });\n  }  \n\n  handleChange = name => event => {\n    this.setState({\n      [name]: event.target.value.trim(),\n    });\n  };\n\n  render(){\n  const { classes } = this.props;\n  \n  if (this.state.redirect) {\n    return <Redirect push to=\"home\" />;\n  }\n    return (\n          <form className={classes.form} onSubmit={this.handleSubmit}>\n            <FormControl margin=\"normal\" required fullWidth>\n              <InputLabel htmlFor=\"email\">Email Address</InputLabel>\n              <Input id=\"email\" value = {this.state.email} onChange={this.handleChange('email')} name=\"email\" autoComplete=\"email\" autoFocus />\n            </FormControl>\n            <FormControl margin=\"normal\" required fullWidth>\n              <InputLabel htmlFor=\"password\">Password</InputLabel>\n              <Input name=\"password\" value = {this.state.password} onChange={this.handleChange('password')} type=\"password\" id=\"password\" autoComplete=\"current-password\" />\n            </FormControl>\n              <Button\n                type=\"submit\"\n                fullWidth\n                variant=\"contained\"\n                color=\"primary\"\n                className={classes.login}>\n                Sign in\n              </Button>\n              { this.state.progress && <CircularProgress style={{marginTop: '10px', marginLeft: '50%'}} className={classes.progress} />}\n          </form>\n    );\n  }\n};\n\nSignIn.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(SignIn);"]},"metadata":{},"sourceType":"module"}